<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.39.2/codemirror.min.css" integrity="sha256-I8NyGs4wjbMuBSUE40o55W6k6P7tu/7G28/JGUUYCIs=" crossorigin="anonymous" />
        <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.js" integrity="sha256-ji09tECORKvr8xB9iCl8DJ8iNMLriDchC1+p+yt1hSs=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ot.js/0.0.15/ot-min.js" integrity="sha256-cwV/xvxdHBADvbLo2DAqaIRWtcDH0733rRNAXgmx8mc=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.39.2/codemirror.min.js" integrity="sha256-uRIJ6Wfou5cTtmcCvQNA9lvsYl8sUbZXxnfG+P79ssY=" crossorigin="anonymous"></script>

        <style>
.CodeMirror {
    width: 100%;
    height: 100%;
}
        </style>
        <script>
$(() => {
    var socket = io.connect();

    socket.on('doc', (doc) => {
        $('body').append('<textarea id="editor"></textarea>');

        var editor = CodeMirror.fromTextArea($('#editor')[0], {
            lineNumbers: true, 
        });
        editor.setValue(doc.str);

        var sockAdapt = new ot.SocketIOAdapter(socket);
        var editAdapt = new ot.CodeMirrorAdapter(editor);
        var otClient = new ot.EditorClient(doc.revision, doc.clients, sockAdapt, editAdapt);
    });
});
        </script>
    </head>
    <body>
    </body>
</html>

